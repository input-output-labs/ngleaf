<div class="organization-selector" *ngIf="!!(currentAccount$ | async) ; else notLoggedIn">
  <div *ngIf="(organizations$ | async)?.length; else noOrganizations">
    <a mat-icon-button [matMenuTriggerFor]="menu" *ngIf="reduced" [matTooltip]="'leaf.organization-selector.organization-switch-label' | translate" matTooltipPosition="right">
      <mat-icon>sync_alt</mat-icon>
    </a>
    <button mat-button [matMenuTriggerFor]="menu" class="full-width menu-item-link" *ngIf="!reduced">
      <mat-icon>sync_alt</mat-icon>
      <span *ngIf="(currentOrganization$ | async) as currentOrganization; else noCurrentOrganization">
        {{currentOrganization.name}}
      </span>
    </button>
  </div>
</div>

<mat-menu #menu="matMenu" [xPosition]="menuXPosition" [yPosition]="menuYPosition">
  <mat-list role="list">
    <mat-list-item role="listitem" *ngFor="let organization of organizations$ | async" >
      <button mat-menu-item (click)="selectOrganization(organization)">{{ organization.name }}</button>
    </mat-list-item>
  </mat-list>
</mat-menu>
<ng-template #noOrganizations> {{ 'leaf.organization-selector.no-organizations' | translate }} </ng-template>
<ng-template #noCurrentOrganization> {{ 'leaf.organization-selector.organization-selector-label' | translate }} </ng-template>
<ng-template #notLoggedIn>
  <div  *ngIf="!hideWhenNotLoggedIn">
    {{ 'leaf.organization-selector.not-logged-in-disclaimer' | translate }}
  </div>
</ng-template>
